(()=>{"use strict";var e={528:(e,t,o)=>{o.d(t,{Z:()=>S});var r=o(81),i=o.n(r),a=o(645),n=o.n(a),d=o(667),s=o.n(d),c=new URL(o(512),o.b),l=new URL(o(626),o.b),m=new URL(o(806),o.b),h=new URL(o(427),o.b),p=new URL(o(468),o.b),u=new URL(o(230),o.b),g=new URL(o(699),o.b),f=new URL(o(767),o.b),b=new URL(o(900),o.b),v=n()(i()),_=s()(c),w=s()(l),x=s()(m),y=s()(h),k=s()(p),z=s()(u),L=s()(g),E=s()(f),F=s()(b);v.push([e.id,'/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}*,*::before,*::after{box-sizing:border-box}html{font-size:62.5%}img,[style*=inline-block i],svg,canvas,picture{vertical-align:middle}img,svg{height:auto;max-width:100%}ul,ol{margin:0;padding:0;list-style-type:none}li,blockquote,figure{margin:0;padding:0}button{padding:0;color:inherit;background-color:transparent;appearance:none;border:none;cursor:pointer}@font-face{font-family:"Josefin Sans";font-style:normal;font-weight:400;src:url('+_+') format("woff2"),url('+w+') format("woff")}@font-face{font-family:"Josefin Sans";font-style:normal;font-weight:700;src:url('+x+') format("woff2"),url('+y+') format("woff")}:root{--base-width-max-width: 54rem;--base-width-side-margin: 2rem;--font-size-90: 1.4rem;--font-size-100: 1.8rem;--font-size-110: 4rem;--header-inset: 22.6rem;--default-radius: 0.4rem;--checkbox-gradient: linear-gradient(135deg, #77B4FF, #996ADE);--checkbox-gradient-inner: radial-gradient(closest-side, var(--color-bg), var(--color-bg) 99.9%, rgba(255, 255, 255, 0) 100%);--list-padding: 1.9rem 2.4rem 1.8rem}html{--color-body-bg: #fafafa;--color: #000;--color-bg: #FFF;--color-state: #9394a5;--color-state-active: #4B79D6;--color-state-hover: #484b6a;--color-state-disabled: #e4e5f1;--color-in-header: #FFF;--color-divider: #d2d3db;--color-footer: #9394a5;--pseudo-header-image: url('+k+");--switch-mode-image: url("+z+");--shadow-color: #d2d3db}@media(prefers-color-scheme: dark){html{--color-body-bg: #161722;--color: #cacde8;--color-bg: #25273c;--color-state: #9394a5;--color-state-active: #4B79D6;--color-state-hover: #e4e5f1;--color-state-disabled: #4d5066;--color-in-header: #FFF;--color-divider: #9394a5;--color-footer: #9394a5;--pseudo-header-image: url("+L+");--switch-mode-image: url("+z+");--shadow-color: rgba(0, 0, 0, .2)}}html.switch-mode{--color-body-bg: #161722;--color: #cacde8;--color-bg: #25273c;--color-state: #9394a5;--color-state-active: #4B79D6;--color-state-hover: #e4e5f1;--color-state-disabled: #4d5066;--color-in-header: #FFF;--color-divider: #9394a5;--color-footer: #9394a5;--pseudo-header-image: url("+L+");--switch-mode-image: url("+z+");--shadow-color: rgba(0, 0, 0, .2)}@media(prefers-color-scheme: dark){html.switch-mode{--color-body-bg: #fafafa;--color: #000;--color-bg: #FFF;--color-state: #9394a5;--color-state-active: #4B79D6;--color-state-hover: #484b6a;--color-state-disabled: #e4e5f1;--color-in-header: #FFF;--color-divider: #d2d3db;--color-footer: #9394a5;--pseudo-header-image: url("+k+");--switch-mode-image: url("+z+');--shadow-color: #d2d3db}}body{font:normal 400 1.8rem/1.6 "Josefin Sans",sans-serif}body{display:flex;flex-direction:column;min-height:100vh;background-color:var(--color-body-bg);color:var(--color)}body>header,body>footer{flex:0 0 auto}body>main{flex:1 1 auto}.base-width{width:calc(100% - (2 * 2rem));max-width:54rem;margin-right:auto;margin-left:auto}@supports(max-width: var(--base-width-max-width)){.base-width{width:calc(100% - 2*var(--base-width-side-margin));max-width:var(--base-width-max-width)}}.main::before{content:"";display:block;min-height:calc(22.6rem + 2rem);min-height:calc(var(--header-inset) + 2rem);margin-bottom:calc(22.6rem * -1);margin-bottom:calc(var(--header-inset)*-1);padding-top:20.8333333333%;background-image:url('+k+");background-image:var(--pseudo-header-image);background-repeat:no-repeat;background-size:cover}.header-title{display:flex;align-items:flex-start;color:#fff;color:var(--color-in-header);margin-bottom:3.6rem}.header-title__main{margin-top:0;margin-bottom:0;font-size:4rem;font-size:var(--font-size-110);text-transform:uppercase;letter-spacing:.38em;line-height:1.2;font-weight:400}.header-title__action{margin-top:.6rem;margin-left:auto}.mode-switch{text-indent:-999em;width:2.6rem;height:2.6rem;background-image:url("+z+');background-image:var(--switch-mode-image);background-size:contain;background-repeat:no-repeat;background-position:center center;cursor:pointer}:root{--icon-move-color: #494C6B}.icon-move{display:block;position:relative;width:1.8rem;height:1.8rem}.icon-move>*{position:absolute;top:0;right:0;bottom:0;left:0;width:calc(100% - 4px);height:1px;margin:auto;background-color:var(--icon-move-color)}.icon-move>*::before,.icon-move>*::after{content:"";position:absolute;top:50%;display:block;border-style:solid;border-color:transparent var(--icon-move-color) transparent var(--icon-move-color);border-width:5px;transform:translateY(-50%)}.icon-move>*::before{right:100%;border-left-width:0}.icon-move>*::after{left:100%;border-right-width:0}.icon-move>:last-child{transform:rotate(-90deg)}.todo-item{position:relative;padding:1.9rem 2.4rem 1.8rem;padding:var(--list-padding);border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:#d2d3db;border-bottom-color:var(--color-divider);background-color:#fff;background-color:var(--color-bg);font-weight:400;letter-spacing:-0.014em}.todo-item.dragover{z-index:1;background-color:var(--color-body-bg)}.todo-item.dragged{opacity:.5}.todo-item,.todo-item>label{display:flex;align-items:center}.todo-item.clone{overflow:hidden;position:absolute;top:0;right:0;bottom:0;left:0;border-radius:var(--default-radius);transform-origin:0% 0%;pointer-events:none;transform:scale(0.5);transition:none !important}.todo-item>label{flex:0 0 100%;align-items:flex-start}.todo-item:first-child{border-top-left-radius:.4rem;border-top-left-radius:var(--default-radius);border-top-right-radius:.4rem;border-top-right-radius:var(--default-radius)}.todo-item--input{border-radius:.4rem;border-radius:var(--default-radius);margin-bottom:2.4rem;border-bottom:none}.todo-item__checkbox{position:absolute;width:0;height:0;overflow:hidden;opacity:0}.todo-item__label,.todo-item__input{font-size:1.8rem;font-size:var(--font-size-100);line-height:1.5;padding:0}.todo-item__label{position:relative;display:flex;align-items:flex-start;flex:1 1 100%;cursor:pointer}.todo-item__checkbox:checked+.todo-item__label{text-decoration:line-through;color:#e4e5f1;color:var(--color-state-disabled)}.todo-item__checkbox:focus+.todo-item__label{color:var(--color)}.todo-item__pseudo-checkbox{overflow:hidden;display:block;position:relative;flex:0 0 auto;border-radius:50%;margin-right:2.4rem;vertical-align:middle;background-size:100%;background-position:center;background-repeat:no-repeat;background-color:#e9e9ed}.todo-item__pseudo-checkbox::before,.todo-item__pseudo-checkbox::after{content:"";display:block;background-repeat:no-repeat;background-position:center;width:2.4rem;height:2.4rem;border-radius:50%;transition:transform .8s}.todo-item__pseudo-checkbox::before{border:solid 1px transparent;background-color:#fff;background-color:var(--color-bg);background-clip:content-box;transform:scale(1)}.todo-item__pseudo-checkbox::after{position:absolute;top:0;right:0;bottom:0;left:0;background-image:url('+E+");background-size:50%;transform:scale(0)}.todo-item__label:hover .todo-item__pseudo-checkbox,.todo-item:focus-within .todo-item__pseudo-checkbox,.todo-item__checkbox:checked+.todo-item__label .todo-item__pseudo-checkbox,.todo-item__checkbox:focus+.todo-item__label .todo-item__pseudo-checkbox{background-image:linear-gradient(135deg, #77B4FF, #996ADE);transition-duration:.3s}.todo-item__label:hover .todo-item__pseudo-checkbox::before,.todo-item:focus-within .todo-item__pseudo-checkbox::before,.todo-item__checkbox:focus+.todo-item__label .todo-item__pseudo-checkbox::before{border-color:transparent;transition-duration:.3s}.todo-item__checkbox:checked+.todo-item__label .todo-item__pseudo-checkbox::after{transform:scale(1);transition-duration:.3s;transition-delay:.3s}.todo-item__checkbox:checked+.todo-item__label .todo-item__pseudo-checkbox::before{transform:scale(0);transition-duration:.3s}.todo-item__label-inner{flex:1 1 100%}.todo-item__input{display:block;width:100%;background-color:transparent;border:none;color:inherit}.todo-item__input:focus{outline:none}.todo-item__actions{display:flex;align-items:center;position:absolute;top:50%;right:0;min-height:100%;padding-left:1rem;background-image:linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, #FFF 1rem, #FFF);transform:translateY(-50%)}@supports(background-image: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, var(--color-bg) 1rem, var(--color-bg))){.todo-item__actions{background-image:linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, var(--color-bg) 1rem, var(--color-bg))}}@media screen and (min-width: 37.5625em){.todo-item__actions{display:none;min-height:0}}.todo-item__actions>*+*{margin-left:1rem}.todo-item:hover .todo-item__actions{display:flex}.todo-item__delete,.todo-item__single-action{display:block;text-indent:-999em;width:1.8rem;height:1.8rem;background-image:url("+F+');background-repeat:no-repeat;background-size:contain}.todo-item__single-action{background-image:none}.todo-item__dropzone{display:block;position:absolute;top:0;right:0;left:0;width:8em;height:2em;margin:auto;border-radius:1em;background-image:var(--checkbox-gradient);transform:translateY(-50%) scale(0)}.todo-item__dropzone::before,.todo-item__dropzone::after{content:"";display:block;position:absolute;top:0;right:0;bottom:0;left:0;width:1em;height:1px;margin:auto;background-color:var(--color-bg)}.todo-item__dropzone::after{transform:rotate(-90deg)}.todo-item__dropzone~.todo-item__dropzone{top:100%}.todo-item.dragover .todo-item__dropzone{transform:translateY(-50%) scale(1)}.todo-item .todo-item__dropzone.dragover{transform:translateY(-50%) scale(1.2)}.todo-item.prev-drop-sibling .todo-item__dropzone~.todo-item__dropzone,.todo-item.next-drop-sibling .todo-item__dropzone:not(.todo-item__dropzone~.todo-item__dropzone){display:none}.list-footer{display:block}@media screen and (min-width: 37.5625em){.list-footer{display:flex;justify-content:space-between}}.list-footer__upper,.list-footer__lower{flex:0 0 100%;align-items:center;padding:1.9rem 2.4rem 1.8rem;padding:var(--list-padding);background-color:#fff;background-color:var(--color-bg);border-bottom-right-radius:.4rem;border-bottom-right-radius:var(--default-radius);border-bottom-left-radius:.4rem;border-bottom-left-radius:var(--default-radius);padding-top:1.8rem;padding-bottom:1.6rem}.list-footer__upper{display:flex}.list-footer__upper>*+*{margin-left:auto}.list-footer__lower{display:flex;justify-content:center;margin-top:1.6rem;background-color:var(--color-bg);border-radius:var(--default-radius)}@media screen and (min-width: 37.5625em){.list-footer__lower{margin-top:0;margin-left:-100%;min-height:100%;border-radius:0;background-color:transparent;pointer-events:none}}.list-footer__lower>*{pointer-events:all}.list-footer__lower>*+*{margin-left:2rem}.shadow-wrapper{filter:drop-shadow(0px 10px 10px rgba(0, 0, 0, 0.12))}@media screen and (min-width: 37.5625em){.shadow-wrapper{box-shadow:0 30px 60px -20px var(--shadow-color);filter:none}}.todo-counter{counter-reset:todo-item}.todo-counter [data-todo-item]:not(.checked){counter-increment:todo-item}.todo-counter__amount::after{content:counter(todo-item)}.action-button{font-size:var(--font-size-90);color:var(--color-state);font-weight:400;line-height:1.142;letter-spacing:-0.01em}.action-button--strong{font-weight:700}.action-button:hover{color:var(--color-state-hover)}.action-button.active{color:var(--color-state-active)}.action-button--pseudo:hover{color:var(--color-state-disabled)}.info-footer{margin-top:4.8rem;font-size:1.4rem;font-size:var(--font-size-90);text-align:center;color:#9394a5;color:var(--color-footer)}',""]);const S=v},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",r=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),r&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),r&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var n={};if(r)for(var d=0;d<this.length;d++){var s=this[d][0];null!=s&&(n[s]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);r&&n[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),o&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=o):l[2]=o),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),t.push(l))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function o(e){for(var o=-1,r=0;r<t.length;r++)if(t[r].identifier===e){o=r;break}return o}function r(e,r){for(var a={},n=[],d=0;d<e.length;d++){var s=e[d],c=r.base?s[0]+r.base:s[0],l=a[c]||0,m="".concat(c," ").concat(l);a[c]=l+1;var h=o(m),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var u=i(p,r);r.byIndex=d,t.splice(d,0,{identifier:m,updater:u,references:1})}n.push(m)}return n}function i(e,t){var o=t.domAPI(t);return o.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var n=0;n<a.length;n++){var d=o(a[n]);t[d].references--}for(var s=r(e,i),c=0;c<a.length;c++){var l=o(a[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=s}}},569:e=>{var t={};e.exports=function(e,o){var r=function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(o)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,o)=>{e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var r="";o.supports&&(r+="@supports (".concat(o.supports,") {")),o.media&&(r+="@media ".concat(o.media," {"));var i=void 0!==o.layer;i&&(r+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),r+=o.css,i&&(r+="}"),o.media&&(r+="}"),o.supports&&(r+="}");var a=o.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},427:(e,t,o)=>{e.exports=o.p+"6fb46049fbfa2217115c.woff"},806:(e,t,o)=>{e.exports=o.p+"5cbad140cc590673d39a.woff2"},626:(e,t,o)=>{e.exports=o.p+"0fd01de8781c78d2c936.woff"},512:(e,t,o)=>{e.exports=o.p+"36152c4291179fb52202.woff2"},699:(e,t,o)=>{e.exports=o.p+"73e47dbb723ebc772ef0.jpg"},468:(e,t,o)=>{e.exports=o.p+"3508d620efd5a52bb4ce.jpg"},767:(e,t,o)=>{e.exports=o.p+"a8fb15d0278c8e312df5.svg"},900:(e,t,o)=>{e.exports=o.p+"6ee81d30b75cab19d6f7.svg"},230:(e,t,o)=>{e.exports=o.p+"6c03114b495d05f4380b.svg"}},t={};function o(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,o),a.exports}o.m=e,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),o.b=document.baseURI||self.location.href,o.nc=void 0,(()=>{var e=o(379),t=o.n(e),r=o(795),i=o.n(r),a=o(569),n=o.n(a),d=o(565),s=o.n(d),c=o(216),l=o.n(c),m=o(589),h=o.n(m),p=o(528),u={};u.styleTagTransform=h(),u.setAttributes=s(),u.insert=n().bind(null,"head"),u.domAPI=i(),u.insertStyleElement=l(),t()(p.Z,u),p.Z&&p.Z.locals&&p.Z.locals;const g=function(e,t){return function(o){o.target.closest(e)&&t(o)}};document.querySelectorAll("[data-todo-app=menu]").forEach((e=>new class extends class{mapOptions(e,t){let o=Object.assign({},e);return o=Array.isArray(e)?e.map((e=>e)):Object.assign({},e),Object.keys(t).forEach((e=>{"object"!=typeof t[e]||t[e]instanceof Node||t[e]instanceof Function?o[e]=t[e]:o[e]=this.mapOptions(o[e],t[e])})),o}getNamespace(e=""){return this.settings.namespace+e}getNamespaceClass(e){return"."+this.getNamespace(e)}_mapMediaOptions(){this.settings=this.mapOptions(this._defaultSettings,this._customSettings),this.settings.medias&&this.settings.medias.forEach((function(e){window.matchMedia(e.media).matches&&(this.settings=this.mapOptions(this.settings,e.settings))}))}_windowResizeListener(){clearTimeout(this._windowResizeTimeout),this._windowResizeTimeout=setTimeout((function(){this._mapMediaOptions(),this._constructPrivates&&this._constructPrivates()}),this.settings.windowResizeDelay)}}{constructor(e){super(),this.el=e,this.menu=this.el.querySelector("[data-todo-list]"),this.todoList=this.menu,this.itemTemplate=this._getTemplate(),this.menu.addEventListener("itemsReady",this.render.bind(this)),this.filter={},this.todoList.addEventListener("click",g("[data-todo-item-action=remove]",(e=>{this.remove(this._getParentIndex(e.target))}))),this._applyDragEvents(),this.todoList.addEventListener("click",g("[value=checked]",(e=>{this.todos[this._getParentIndex(e.target)].checked=e.target.checked,this.save(),this.render()}))),this.el.addEventListener("click",g("[data-todo-action=clearCompleted]",this.clearCompleted.bind(this))),this.el.addEventListener("click",g("[data-todo-filter]",this._filterListener.bind(this))),this.form=this.el.querySelector("[data-todo-form]"),this.form.addEventListener("submit",this._todoFormListener.bind(this)),this._readItems()}add(e){this.insert(e)}insert(e,t=this.todos.length){this.todos.splice(t,0,e),this.save(),this._createItem(e)}save(){window.localStorage.setItem("todos",JSON.stringify(this.todos))}remove(e){this.todos.splice(e,1),this.save(),this.render()}clearCompleted(){this.todos=this.todos.filter((e=>{if(!e.checked)return e})),this.save(),this.render()}_filterListener(e){let t=e.target.closest("[data-todo-filter]");switch(this.el.querySelectorAll("[data-todo-filter]").forEach((e=>e.classList.remove("active"))),t.classList.add("active"),t.dataset.todoFilter){case"*":delete this.filter.checked;break;case"complete":this.filter.checked=!0;break;case"active":this.filter.checked=!1}this.render()}_todoItemDropListener(e){e.preventDefault();let t=e.target.closest("[data-todo-item-dropzone]");if(t.classList.remove("dragover"),t===this.dragged)return void this.render();e.stopPropagation();let o=this.todos[this._getParentIndex(t)],r=this.todos.splice(this._getParentIndex(this.dragged),1)[0],i=this.todos.indexOf(o);"after"===t.dataset.todoItemDropzone&&(i+=1),this.todos.splice(i,0,r),this.save(),this.render()}_todoFormListener(e){e.preventDefault();let t={checked:!1},o=new FormData(this.form);for(let e of o.entries())t[e[0]]=e[1],o.delete(e[0]);t.task.trim().length&&(this.add(t),this.form.reset())}_applyDragEvents(){this.todoList.addEventListener("mouseover",g("[data-todo-item-action=drag]",(e=>{e.target.closest("[data-todo-item]").draggable=!0}))),this.todoList.addEventListener("mouseout",g("[data-todo-item-action=drag]",(e=>{e.target.closest("[data-todo-item]").draggable=!1}))),this.todoList.addEventListener("dragstart",g("[data-todo-item]",(e=>{this.dragged=e.target.closest("[data-todo-item]");let t=this.dragged.cloneNode(!0),o=document.createElement("div");t.classList.add("clone"),o.appendChild(t),this.dragged.appendChild(o),e.dataTransfer.setData("text/plain",this.dragged.dataset.todoIndex),e.dataTransfer.setDragImage(o,4,4),setTimeout((()=>o.remove()),1),this.dragged.previousElementSibling&&this.dragged.previousElementSibling.classList.add("prev-drop-sibling"),this.dragged.nextElementSibling&&this.dragged.nextElementSibling.classList.add("next-drop-sibling"),this.dragged.classList.add("dragged")}))),this.todoList.addEventListener("dragend",g("[data-todo-item]",(e=>{this.render()}))),this.todoList.addEventListener("dragover",g("[data-todo-item-dropzone]",(e=>{e.preventDefault()}))),this.todoList.addEventListener("dragenter",g("[data-todo-item-dropzone]",(e=>{e.preventDefault();let t=e.target.closest("[data-todo-item]"),o=e.target.closest("[data-todo-item-dropzone]");t!==this.dragged&&(this.menu.querySelectorAll("[data-todo-item]").forEach((e=>e.classList.remove("dragover"))),this.menu.querySelectorAll("[data-todo-item-dropzone]").forEach((e=>e.classList.remove("dragover"))),t.classList.add("dragover"),o.classList.add("dragover"))}))),this.todoList.addEventListener("dragleave",g("[data-todo-item-dropzone]",(e=>{}))),document.addEventListener("drop",g("[data-todo-item-dropzone]",this._todoItemDropListener.bind(this)))}_getTemplate(){if(this.itemTemplate)return this.itemTemplate;let e=this.menu.querySelector("[data-todo-item-template]");return document.importNode(e.content,!0)}_createItem(e,t=this.todos.length-1){if(!this._matchesFilter(e))return;let o=document.importNode(this.itemTemplate,!0);o.querySelectorAll("[data-todo-item-content]").forEach((t=>{let o=t.dataset.todoItemContent;e[o]?t.innerHTML=e[o]:t.remove()})),o.querySelector("input[value=checked]").checked=e.checked,e.checked&&o.firstElementChild.classList.add("checked"),o.firstElementChild.dataset.todoIndex=t,this.todoList.appendChild(o)}_matchesFilter(e){if(0===Object.keys(this.filter).length)return!0;let t=!0;for(let o in this.filter)t=t&&this.filter[o]===e[o];return t}_getParentIndex(e){return parseInt(e.closest("[data-todo-index]").dataset.todoIndex)}_readItems(){let e=window.localStorage.getItem("todos");null!==e&&e.length>2?this._setTodos(JSON.parse(e)):fetch("./data/todos.json").then((e=>e.json())).then(this._setTodos.bind(this))}_setTodos(e){this.todos=e,this.save(),this.menu.dispatchEvent(new CustomEvent("itemsReady",{detail:{TodoMenu:this}}))}render(){this.todoList.innerHTML="";for(let e in this.todos)this._createItem(this.todos[e],e)}}(e))),document.querySelectorAll("[data-mode-switch]").forEach((e=>e.addEventListener("click",(e=>{document.documentElement.classList.toggle("switch-mode")}))))})()})();